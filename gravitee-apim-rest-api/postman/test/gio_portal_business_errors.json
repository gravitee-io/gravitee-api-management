{
	"info": {
		"_postman_id": "c2c83ea2-6d75-407e-912c-f4fdbee683d2",
		"name": "Portal : Business Error",
		"description": "This collections contains requests to test business errors (no 401) on the Portal API",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "applications",
			"item": [
				{
					"name": "400",
					"item": [
						{
							"name": "-- Prepare --",
							"item": [
								{
									"name": "Create Application",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "47d90c41-e196-42b7-ae3c-223529556606",
												"exec": [
													"pm.test(\"Status code is 201\", function () {",
													"    pm.response.to.have.status(201);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"pm.collectionVariables.set(\"created_application_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"404Application\",\n\t\"description\":\"Application for 'Notification not found', 'Member not found' and 'Log not found'\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/applications",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"applications"
											]
										}
									},
									"response": []
								},
								{
									"name": "Enable client registration service",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "39f4f580-cfb9-41e7-9baa-847e108c7af4",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"application\": {\n\t\t\"registration\": {\n\t\t\t\"enabled\": true\n\t\t}\n\t}\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/portal",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"portal"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create a notification config",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "485edc85-7b96-4632-9df4-cb347a7386c9",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"pm.collectionVariables.set(\"created_generic_config\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"400GenericConfig\",\n\t\"config_type\":\"GENERIC\",\n\t\"referenceId\":\"DEFAULT\",\n\t\"notifier\":\"default-email\",\n\t\"hooks\":[],\n\t\"referenceType\":\"PORTAL\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/configuration/notificationsettings",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"configuration",
												"notificationsettings"
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "bcef6a34-9b1e-44f2-bf01-5d4fdda82e42",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "af7ad743-7da6-49f0-99b0-d388fcdbd066",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Invalid input",
							"item": [
								{
									"name": "POST /applications - Input must not be null.",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "31ea31f7-eda3-4f82-ba28-62bd8cd70060",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications"
											]
										}
									},
									"response": []
								},
								{
									"name": "PUT /applications/:applicationId - Input must not be null.",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "1b2bec91-82ee-498f-b6de-409c3d4ae583",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "PUT /applications/:applicationId/notifications - Input must not be null.",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "a95ccb2d-8755-42fc-9721-de2ef433f5e9",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/notifications",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"notifications"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/members - Input must not be null.",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "aca96317-ac0a-4d1e-b737-41d0c5762a34",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/members",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"members"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/members/_transfer_ownership - Input must not be null.",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "64e40b23-a215-47a5-80e5-8dbbc9edd022",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/members/_transfer_ownership",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"members",
												"_transfer_ownership"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "PUT /applications/:applicationId/members/:memberId - Input must not be null.",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "0d243e3a-7e82-4130-bbdf-9e8a70b142b2",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/members/:memberId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"members",
												":memberId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												},
												{
													"key": "memberId",
													"value": "MEMBER"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "24e0b6f8-135e-440b-9cd3-4098696597fb",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "3b8dfadd-0e06-4574-a8a7-293bc2a4a69e",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"pm.test(\"Input must not be null.\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"Input must not be null.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "'applicationId' is not the same that the application in payload",
							"item": [
								{
									"name": "PUT /applications/:applicationId - 'applicationId' is not the same that the application in payload",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "b39da3e9-4b6f-43bc-b005-3867fb5fda6b",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"id\":\"APPLICATION\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "4b9192a3-f17f-4c98-9fd8-d949da9b4e65",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "fd849587-84f3-492d-83fe-a182ba229767",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"pm.test(\"'applicationId' is not the same that the application in payload\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"'applicationId' is not the same that the application in payload\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Client secret for application [404Application] can not be renew.",
							"item": [
								{
									"name": "POST /applications/:applicationId/_renew_secret - Invalid input",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "ea0d0775-db54-4a77-a676-8ddfe3231159",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/_renew_secret",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"_renew_secret"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "e71a9175-5f27-4c9d-b75c-bb6afcb24a3d",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "c579146d-6353-47d1-8c47-188ee9af7a77",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"pm.test(\"Client secret for application [404Application] can not be renew.\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"Client secret for application [404Application] can not be renew.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "log query param validation",
							"item": [
								{
									"name": "POST /applications/:applicationId/logs/_export - From = -1",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "9018ecaf-6d5b-4568-8478-50fe4efa2bdc",
												"exec": [
													"pm.test(\"Query parameter 'from' is not valid\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Query parameter 'from' is not valid\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/logs/_export?from=-1",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"logs",
												"_export"
											],
											"query": [
												{
													"key": "from",
													"value": "-1"
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/logs/_export - To = -1",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "b348fcc7-86d2-4894-a6df-648cf534a770",
												"exec": [
													"pm.test(\"Query parameter 'to' is not valid\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Query parameter 'to' is not valid\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/logs/_export?to=-1",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"logs",
												"_export"
											],
											"query": [
												{
													"key": "to",
													"value": "-1"
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/logs/_export - from >= to",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "e9fb2133-fbd3-404f-9267-98795718772e",
												"exec": [
													"pm.test(\"'from' query parameter value must not be greater than 'to'\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"'from' query parameter value must not be greater than 'to'\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/logs/_export?from=0&to=0",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"logs",
												"_export"
											],
											"query": [
												{
													"key": "from",
													"value": "0"
												},
												{
													"key": "to",
													"value": "0"
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/logs/_export - order not valid",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "87bc5287-bc40-4d8d-9a59-f568434d0269",
												"exec": [
													"pm.test(\"'order' query parameter value must be 'ASC' or 'DESC'\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"'order' query parameter value must be 'ASC' or 'DESC'\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/logs/_export?from=0&to=1&order=ORDER",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"logs",
												"_export"
											],
											"query": [
												{
													"key": "from",
													"value": "0"
												},
												{
													"key": "to",
													"value": "1"
												},
												{
													"key": "order",
													"value": "ORDER"
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "0b35aee1-bc3e-4c32-a7ab-456a806f74a3",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "badd0801-1af3-4bcf-9cd9-7291619bfb99",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "analytics query param validation",
							"item": [
								{
									"name": "GET /applications/:applicationId/analytics - no type",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "3f5a506b-ee39-4d4a-a00a-e08bd31c77ed",
												"exec": [
													"pm.test(\"Query parameter 'type' must be present and one of : GROUP_BY, DATE_HISTO, COUNT\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Query parameter 'type' must be present and one of : GROUP_BY, DATE_HISTO, COUNT\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/analytics",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"analytics"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/analytics   - From = -1",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "ef2dc17b-fdde-4272-b389-6ae31b34f375",
												"exec": [
													"pm.test(\"Query parameter 'from' is not valid\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Query parameter 'from' is not valid\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/analytics?type=GROUP_BY&from=-1",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"analytics"
											],
											"query": [
												{
													"key": "type",
													"value": "GROUP_BY"
												},
												{
													"key": "from",
													"value": "-1"
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/analytics - To = -1",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "f265ee38-35c5-457d-a930-3645011c65fa",
												"exec": [
													"pm.test(\"Query parameter 'to' is not valid\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Query parameter 'to' is not valid\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/analytics?type=GROUP_BY&to=-1",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"analytics"
											],
											"query": [
												{
													"key": "type",
													"value": "GROUP_BY"
												},
												{
													"key": "to",
													"value": "-1"
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GETT /applications/:applicationId/analytics - from >= to",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "6a374342-c4c7-4eb0-90f9-545a1da043b0",
												"exec": [
													"pm.test(\"'from' query parameter value must not be greater than 'to'\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"'from' query parameter value must not be greater than 'to'\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/analytics?type=GROUP_BY&from=0&to=0",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"analytics"
											],
											"query": [
												{
													"key": "type",
													"value": "GROUP_BY"
												},
												{
													"key": "from",
													"value": "0"
												},
												{
													"key": "to",
													"value": "0"
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/analytics - Interval = -1",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "e568438b-8179-46cc-9a7b-0a7ec72da0b6",
												"exec": [
													"pm.test(\"Query parameter 'interval' is not valid\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Query parameter 'interval' is not valid\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/analytics?type=GROUP_BY&from=0&to=1&interval=-1",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"analytics"
											],
											"query": [
												{
													"key": "type",
													"value": "GROUP_BY"
												},
												{
													"key": "from",
													"value": "0"
												},
												{
													"key": "to",
													"value": "1"
												},
												{
													"key": "interval",
													"value": "-1"
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/analytics - Interval invalid",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "32097546-951a-45fe-8268-97f5e96e0cc7",
												"exec": [
													"pm.test(\"Query parameter 'interval' is not valid. 'interval' must be >= 1000 and <= 1000000000\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Query parameter 'interval' is not valid. 'interval' must be >= 1000 and <= 1000000000\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/analytics?type=DATE_HISTO&from=0&to=1&interval=100&",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"analytics"
											],
											"query": [
												{
													"key": "type",
													"value": "DATE_HISTO"
												},
												{
													"key": "from",
													"value": "0"
												},
												{
													"key": "to",
													"value": "1"
												},
												{
													"key": "interval",
													"value": "100"
												},
												{
													"key": null,
													"value": null
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/analytics - field is missing",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "bee9d231-060b-46fe-a027-301bca23a073",
												"exec": [
													"pm.test(\"'field' query parameter is required for 'group_by' request\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"'field' query parameter is required for 'group_by' request\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/analytics?type=GROUP_BY&from=0&to=1&interval=1000",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"analytics"
											],
											"query": [
												{
													"key": "type",
													"value": "GROUP_BY"
												},
												{
													"key": "from",
													"value": "0"
												},
												{
													"key": "to",
													"value": "1"
												},
												{
													"key": "interval",
													"value": "1000"
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "1575b57a-6b26-4568-8fbc-163cc015930b",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "6204b742-bdb9-4364-8c2f-a34f9ef7e660",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Clean up --",
							"item": [
								{
									"name": "Delete notification settings",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "09ec33d6-dbb7-4bb1-8149-a9ff1e05611a",
												"exec": [
													"pm.test(\"Status code is 204\", function () {",
													"    pm.response.to.have.status(204);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/configuration/notificationsettings/:notificationId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"configuration",
												"notificationsettings",
												":notificationId"
											],
											"variable": [
												{
													"key": "notificationId",
													"value": "{{created_generic_config}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete created application",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "8be6aa46-a8af-4e00-a359-746a6c7b2955",
												"exec": [
													"pm.test(\"Status code is 204\", function () {",
													"    pm.response.to.have.status(204);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "dc20df63-86a6-4c57-b9fa-40cfa1fd2346",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "0e0a1e1d-c723-48fe-936d-071767cbf471",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "b9cb22fd-d2ed-4686-b2d9-d8cb5f60cd92",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "1baafb94-16f2-4c23-aeec-63d7aa17a04b",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "403",
					"item": [
						{
							"name": "-- Prepare --",
							"item": [
								{
									"name": "Create Application",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "0d819423-4c26-420d-af35-009912725755",
												"exec": [
													"pm.test(\"Status code is 201\", function () {",
													"    pm.response.to.have.status(201);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"pm.collectionVariables.set(\"created_application_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"403Application\",\n\t\"description\":\"Application for Forbidden Access\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/applications",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"applications"
											]
										}
									},
									"response": []
								},
								{
									"name": "GET USER Environment Role",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "5e850907-4cf9-4db0-8b0c-94db9fafa846",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"jsonData.scope = \"ENVIRONMENT\";",
													"pm.collectionVariables.set(\"USER_ENV_ROLE\", jsonData);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/configuration/rolescopes/ENVIRONMENT/roles/USER",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"configuration",
												"rolescopes",
												"ENVIRONMENT",
												"roles",
												"USER"
											]
										}
									},
									"response": []
								},
								{
									"name": "Remove Application permissions from USER Role",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "eb14a1e1-6f2a-48d5-bffc-9f1abde2519d",
												"exec": [
													"var userRole = pm.collectionVariables.get(\"USER_ENV_ROLE\");",
													"userRole.permissions.APPLICATION = [];",
													"pm.collectionVariables.set(\"UPDATED_USER_ENV_ROLE\", JSON.stringify(userRole));"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "fe0ee07a-69e0-4d71-9c90-e660857ba1e6",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{UPDATED_USER_ENV_ROLE}}\n",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/configuration/rolescopes/ENVIRONMENT/roles/USER",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"configuration",
												"rolescopes",
												"ENVIRONMENT",
												"roles",
												"USER"
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "1d96ffd9-1a4b-40cb-b3b8-be5b904253aa",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "ebdb5b2c-2036-40b2-9a2e-ecdcc06d1295",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Test cases --",
							"item": [
								{
									"name": "GET /applications",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications"
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications",
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications"
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "DELETE /applications/:applicationId",
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/picture",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/picture",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"picture"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/notifications",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/notifications",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"notifications"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "PUT /applications/:applicationId/notifications",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "22cf4cee-29e9-41b6-80d7-3f87da478a03",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"hooks\":\"[NEW_SUBSCRIPTION]\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/notifications",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"notifications"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/members",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/members",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"members"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/members/:memberId",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/members/:memberId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"members",
												":memberId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												},
												{
													"key": "memberId",
													"value": "MEMBER"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "PUT /applications/:applicationId/members/:memberId",
									"request": {
										"method": "PUT",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/members/:memberId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"members",
												":memberId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												},
												{
													"key": "memberId",
													"value": "MEMBER"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "DELETE /applications/:applicationId/members/:memberId",
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/members/:memberId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"members",
												":memberId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												},
												{
													"key": "memberId",
													"value": "MEMBER"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/members",
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/members",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"members"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/members/_transfer_ownership",
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/members/_transfer_ownership",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"members",
												"_transfer_ownership"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/analytics",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/analytics",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"analytics"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/logs",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/logs",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"logs"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/logs/:logId",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/logs/:logId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"logs",
												":logId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												},
												{
													"key": "logId",
													"value": "LOG"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/logs/_export",
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/logs/_export",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"logs",
												"_export"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/_renew_secret",
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/_renew_secret",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"_renew_secret"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"auth": {
								"type": "basic",
								"basic": [
									{
										"key": "password",
										"value": "password",
										"type": "string"
									},
									{
										"key": "username",
										"value": "user",
										"type": "string"
									}
								]
							},
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "d16d1043-36ce-4ee6-9ada-077e98a3a33e",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "192e501d-b00f-4a28-8626-a03a64fc7df3",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 403\", function () {",
											"    pm.response.to.have.status(403);",
											"});",
											"",
											"pm.test(\"You do not have sufficient rights to access this resource\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"You do not have sufficient rights to access this resource\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Clean up --",
							"item": [
								{
									"name": "Reset permissions from USER Role",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "e03936ee-eab2-4653-a735-3f85555a2abd",
												"exec": [
													"var userRole = pm.collectionVariables.get(\"USER_ENV_ROLE\");",
													"userRole.permissions.APPLICATION = [ \"C\", \"R\", \"U\", \"D\"];",
													"pm.collectionVariables.set(\"USER_ENV_ROLE\", JSON.stringify(userRole));"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "d191e661-05e4-4498-bfe5-24d8eda9f0c3",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{USER_ENV_ROLE}}\n",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/configuration/rolescopes/ENVIRONMENT/roles/USER",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"configuration",
												"rolescopes",
												"ENVIRONMENT",
												"roles",
												"USER"
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete created application",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "4ed04b77-8d60-418e-baa4-c9d191038282",
												"exec": [
													"pm.test(\"Status code is 204\", function () {",
													"    pm.response.to.have.status(204);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "1d1a87a3-9c7f-4d04-82fb-50a6ee797029",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "347121ad-c646-4c7e-bcaa-718d73dd83fb",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "404",
					"item": [
						{
							"name": "-- Prepare --",
							"item": [
								{
									"name": "Create Application",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "df71aded-cbe5-4a86-a591-09c6bb348f3a",
												"exec": [
													"pm.test(\"Status code is 201\", function () {",
													"    pm.response.to.have.status(201);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"pm.collectionVariables.set(\"created_application\", JSON.stringify(jsonData));",
													"pm.collectionVariables.set(\"created_application_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"404Application\",\n\t\"description\":\"Application for 'Notification not found', 'Member not found' and 'Log not found'\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/applications",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"applications"
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "95f1617d-96aa-4a4f-a3f1-c7be4eff0e65",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "94c0caf9-c18b-44af-8612-9b3ea260c706",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Application not found",
							"item": [
								{
									"name": "GET /applications/:applicationId - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "64cc8e0b-1e52-4691-8f42-ac296ef3ab6a",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "PUT /applications/:applicationId - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "6e881928-1755-4e15-b4fe-df2a80f02c97",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"id\":\"APPLICATION\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "DELETE /applications/:applicationId - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "7c40f840-77d4-4c50-a2dd-a47caa873b8c",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/picture - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "e5695224-72f1-4ccc-b61f-7f1cdf851492",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/picture",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"picture"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/notifications - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "502f2c10-5e9f-42e8-ab3e-485655e5298c",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/notifications",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"notifications"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "PUT /applications/:applicationId/notifications - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "7d016105-17b3-414f-a194-528ddbd5f248",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"hooks\": []\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/notifications",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"notifications"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/members - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "fbdc884e-df37-4433-b666-42318e8a381d",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/members",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"members"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/members - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "8536e054-cd37-4d0a-9346-fa4067eb6f16",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/members",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"members"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/members/_transfer_ownership - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "563e9fd7-b72c-40ae-b714-8c733c6b1e10",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/members/_transfer_ownership",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"members",
												"_transfer_ownership"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/analytics - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "bf6b87c9-1c93-4333-89c9-513906cf2384",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/analytics",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"analytics"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/logs - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "3074cf87-4fde-4bb9-97b1-466a59d0d865",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/logs",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"logs"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/logs/_export - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "9ac8cc9c-3e89-49f6-b430-93f18e820af3",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/logs/_export",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"logs",
												"_export"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/_renew_secret - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "be894b63-0628-4e0b-98c0-0d7c3534a62c",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/_renew_secret",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"_renew_secret"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "139c1ec4-24b8-4ca6-b4b3-78975e539ed2",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "609cdda0-e12e-4858-98ef-859ab2f619fe",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"pm.test(\"Application not found\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"Application [APPLICATION] can not be found.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Member not found",
							"item": [
								{
									"name": "GET /applications/:applicationId/members/:memberId - Member not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "be0153fc-3f2c-4e1d-b223-608313d8600d",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/members/:memberId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"members",
												":memberId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												},
												{
													"key": "memberId",
													"value": "MEMBER"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "PUT /applications/:applicationId/members/:memberId - Member not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "2b07f224-7a5c-4ab8-87c3-4b35d60c41a8",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/members/:memberId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"members",
												":memberId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												},
												{
													"key": "memberId",
													"value": "MEMBER"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "DELETE /applications/:applicationId/members/:memberId - Member not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "f61c4a19-63ce-4f0d-8a09-d5aa80adc885",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/members/:memberId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"members",
												":memberId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												},
												{
													"key": "memberId",
													"value": "MEMBER"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "0778f73d-e8ef-4259-ad47-7b2e7e48b1e3",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "a2c63b3a-a7bd-4aa4-bfd5-1205e2b7b3d3",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"pm.test(\"Member not found\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"User [MEMBER] can not be found.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Log not found",
							"item": [
								{
									"name": "GET /applications/:applicationId/logs/:logId - Log not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "c3b89bce-eb7c-4e0c-a95a-f47b292c49e6",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/applications/:applicationId/logs/:logId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"applications",
												":applicationId",
												"logs",
												":logId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												},
												{
													"key": "logId",
													"value": "LOG"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "96d11113-42e6-4ba0-b31b-67ea694bdbcc",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "e9f88cb4-d0c4-4030-a738-249f05077d27",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"pm.test(\"Log not found\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"Log [LOG] can not be found.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Clean up --",
							"item": [
								{
									"name": "Delete created application",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "fe5225e4-3302-4536-8b36-cfce3bb90419",
												"exec": [
													"pm.test(\"Status code is 204\", function () {",
													"    pm.response.to.have.status(204);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "7ebaaee4-978c-40cc-8fe9-1dd81db84828",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "ec71f766-94d9-4818-ad1a-7421caef15b0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "a50329c4-e387-4e95-9d19-f096f9d00b2e",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "afae2691-5998-4525-9589-227334dd7cf0",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "configuration",
			"item": [
				{
					"name": "404",
					"item": [
						{
							"name": "GET /configuration/identities/:identityProviderId",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "182a8a5d-8a28-41bf-aef3-6cda8c980cea",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{GRAVITEEIO_PORTAL_URL}}/configuration/identities/:identityProviderId",
									"host": [
										"{{GRAVITEEIO_PORTAL_URL}}"
									],
									"path": [
										"configuration",
										"identities",
										":identityProviderId"
									],
									"variable": [
										{
											"key": "identityProviderId",
											"value": "IDENTITY_PROVIDER"
										}
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "1bcd0320-e2ab-4e8c-b926-8318a5ff7270",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "48452657-bbe7-4f8d-9c42-a26063668916",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 404\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"pm.test(\"Identity provider not found\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.errors[0].message).to.eql(\"Identity provider [IDENTITY_PROVIDER] can not be found.\");",
									"});"
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "subscriptions",
			"item": [
				{
					"name": "400",
					"item": [
						{
							"name": "Input must not be null.",
							"item": [
								{
									"name": "POST /subscriptions",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "9527cdc2-318c-41f2-bd78-10aff2f37cb2",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"Input must not be null.\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Input must not be null.\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/subscriptions",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"subscriptions"
											]
										},
										"description": "Input must not be null"
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "0473aef0-f7bf-4f54-b17a-1f5ebbe9848c",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "cb1a5be7-9762-44b9-aa8c-477125efb297",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "'keyId' parameter does not correspond to the subscription",
							"item": [
								{
									"name": "-- Prepare --",
									"item": [
										{
											"name": "Create API for subscription",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "2a679288-3415-4977-b65d-bc81245d9627",
														"exec": [
															"pm.test(\"Status code is 201\", function () {",
															"    pm.response.to.have.status(201);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"pm.collectionVariables.set(\"created_api_for_sub\", JSON.stringify(jsonData));",
															"pm.collectionVariables.set(\"created_api_for_sub_id\", jsonData.id);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"name\":\"400API_SUB\",\n\t\"version\":\"1.0\",\n\t\"description\":\"API for 'Subscription' bad request\",\n\t\"contextPath\":\"/400apisub\",\n\t\"endpoint\":\"http://localhost\"\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/apis",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"apis"
													]
												}
											},
											"response": []
										},
										{
											"name": "Publish created API",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"id": "ebb6519a-c9c6-4a53-8c3e-0da39f986a7d",
														"exec": [
															"var createdApi_for_sub_toPublish = JSON.parse(pm.collectionVariables.get(\"created_api_for_sub\"));",
															"createdApi_for_sub_toPublish.lifecycle_state='published';",
															"delete createdApi_for_sub_toPublish.id;",
															"delete createdApi_for_sub_toPublish.state;",
															"delete createdApi_for_sub_toPublish.created_at;",
															"delete createdApi_for_sub_toPublish.updated_at;",
															"delete createdApi_for_sub_toPublish.owner;",
															"delete createdApi_for_sub_toPublish.context_path;",
															"pm.collectionVariables.set(\"createdApi_for_sub_toPublish\", JSON.stringify(createdApi_for_sub_toPublish));",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"id": "2958a753-39a2-4915-930b-7761a996621e",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PUT",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{{createdApi_for_sub_toPublish}}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"apis",
														":apiId"
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Create Plan for subscription",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "d3390763-ceb4-4e79-9f7d-c6fdb4e49f62",
														"exec": [
															"pm.test(\"Status code is 201\", function () {",
															"    pm.response.to.have.status(201);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"pm.collectionVariables.set(\"created_plan_for_sub_id\", jsonData.id);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"name\":\"Plan_for_sub\",\n\t\"description\": \"a plan for Subscription bad request\"\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/plans",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"apis",
														":apiId",
														"plans"
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Publish created Plan",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "f7606194-1da0-4b26-9400-3556659932f0",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"type": "text",
														"value": "application/json"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"name\":\"Plan_for_sub\",\n\t\"description\": \"a plan for Subscription bad request\"\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/plans/:planId/_publish",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"apis",
														":apiId",
														"plans",
														":planId",
														"_publish"
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														},
														{
															"key": "planId",
															"value": "{{created_plan_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Create Application for subscription",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "871c04a4-7e55-4aad-8046-e08f983a6290",
														"exec": [
															"pm.test(\"Status code is 201\", function () {",
															"    pm.response.to.have.status(201);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"pm.collectionVariables.set(\"created_application_for_sub_id\", jsonData.id);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"type": "text",
														"value": "application/json"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"name\":\"400ApplicationSub\",\n\t\"description\":\"Application for 'Subscription bad request'\"\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/applications",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"applications"
													]
												}
											},
											"response": []
										},
										{
											"name": "Create a first Subscription",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "2eafab0b-da96-4af8-8212-ccebfb4f1f18",
														"exec": [
															"pm.test(\"Status code is 201\", function () {",
															"    pm.response.to.have.status(201);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"pm.collectionVariables.set(\"created_sub_id\", jsonData.id);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/subscriptions?application={{created_application_for_sub_id}}&plan={{created_plan_for_sub_id}}",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"apis",
														":apiId",
														"subscriptions"
													],
													"query": [
														{
															"key": "application",
															"value": "{{created_application_for_sub_id}}"
														},
														{
															"key": "plan",
															"value": "{{created_plan_for_sub_id}}"
														}
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Get subscription key",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "cc65c34d-d4e5-4c3f-82e7-9f3f2405e74d",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"pm.collectionVariables.set(\"first_sub_api_key\", jsonData[0].key);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/subscriptions/:subscriptionId/apikeys",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"apis",
														":apiId",
														"subscriptions",
														":subscriptionId",
														"apikeys"
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														},
														{
															"key": "subscriptionId",
															"value": "{{created_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Create a second Plan for subscription",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "e0765f26-1968-47e5-a381-d3fda075ad78",
														"exec": [
															"pm.test(\"Status code is 201\", function () {",
															"    pm.response.to.have.status(201);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"pm.collectionVariables.set(\"created_sec_plan_for_sub_id\", jsonData.id);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"type": "text",
														"value": "application/json"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"name\":\"Plan_for_sub_2\",\n\t\"description\": \"another plan for Subscription bad request\"\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/plans",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"apis",
														":apiId",
														"plans"
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Publish second created Plan",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "524a325d-2a4f-4253-9116-57dbe50adf39",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"type": "text",
														"value": "application/json"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"name\":\"Plan_for_sub2\",\n\t\"description\": \"a plan for Subscription bad request\"\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/plans/:planId/_publish",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"apis",
														":apiId",
														"plans",
														":planId",
														"_publish"
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														},
														{
															"key": "planId",
															"value": "{{created_sec_plan_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Create a second Subscription",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "e9ee7d5f-365a-4c80-a7c1-189ef7c06ab4",
														"exec": [
															"pm.test(\"Status code is 201\", function () {",
															"    pm.response.to.have.status(201);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"pm.collectionVariables.set(\"created_sec_sub_id\", jsonData.id);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"type": "text",
														"value": "application/json"
													}
												],
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/subscriptions?application={{created_application_for_sub_id}}&plan={{created_sec_plan_for_sub_id}}",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"apis",
														":apiId",
														"subscriptions"
													],
													"query": [
														{
															"key": "application",
															"value": "{{created_application_for_sub_id}}"
														},
														{
															"key": "plan",
															"value": "{{created_sec_plan_for_sub_id}}"
														}
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								},
								{
									"name": "-- Test cases -- ",
									"item": [
										{
											"name": "POST /subscriptions/{subscriptionId}/keys/{keyId}/_revoke",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "57e463d2-7a79-479e-8181-a9a8f3f3a0ae",
														"exec": [
															"pm.test(\"Status code is 400\", function () {",
															"    pm.response.to.have.status(400);",
															"});",
															"pm.test(\"'keyId' parameter does not correspond to the subscription\", function () {",
															"    pm.expect(pm.response.text()).to.include(\"'keyId' parameter does not correspond to the subscription\");",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"url": {
													"raw": "{{GRAVITEEIO_PORTAL_URL}}/subscriptions/:subscriptionId/keys/:keyId/_revoke",
													"host": [
														"{{GRAVITEEIO_PORTAL_URL}}"
													],
													"path": [
														"subscriptions",
														":subscriptionId",
														"keys",
														":keyId",
														"_revoke"
													],
													"variable": [
														{
															"key": "subscriptionId",
															"value": "{{created_sec_sub_id}}"
														},
														{
															"key": "keyId",
															"value": "{{first_sub_api_key}}"
														}
													]
												}
											},
											"response": []
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								},
								{
									"name": "-- Clean up --",
									"item": [
										{
											"name": "Close subscription",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "5b31e873-5cca-4d50-927c-cf72663e181e",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/subscriptions/:subscriptionId/status?status=CLOSED",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"apis",
														":apiId",
														"subscriptions",
														":subscriptionId",
														"status"
													],
													"query": [
														{
															"key": "status",
															"value": "CLOSED"
														}
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														},
														{
															"key": "subscriptionId",
															"value": "{{created_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Close second subscription",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "04bab463-a8ba-471c-ab98-30c1ac7d3276",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/subscriptions/:subscriptionId/status?status=CLOSED",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"apis",
														":apiId",
														"subscriptions",
														":subscriptionId",
														"status"
													],
													"query": [
														{
															"key": "status",
															"value": "CLOSED"
														}
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														},
														{
															"key": "subscriptionId",
															"value": "{{created_sec_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Delete created application",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "db3b32ce-e54d-4718-91d1-ff023106f390",
														"exec": [
															"pm.test(\"Status code is 204\", function () {",
															"    pm.response.to.have.status(204);",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "DELETE",
												"header": [],
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/applications/:applicationId",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"applications",
														":applicationId"
													],
													"variable": [
														{
															"key": "applicationId",
															"value": "{{created_application_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Close created Plan",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "c4a3b51c-e72b-46b6-9d25-6cc070ed0fa9",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/plans/:planId/_close",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"apis",
														":apiId",
														"plans",
														":planId",
														"_close"
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														},
														{
															"key": "planId",
															"value": "{{created_plan_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Close second created Plan",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "c3f962b7-c3ee-47c2-a2e3-4dd41dc8ed01",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/plans/:planId/_close",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"apis",
														":apiId",
														"plans",
														":planId",
														"_close"
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														},
														{
															"key": "planId",
															"value": "{{created_sec_plan_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Delete created API",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "26760f61-a17b-4eec-8c62-f79dc37d4ba6",
														"exec": [
															"pm.test(\"Status code is 204\", function () {",
															"    pm.response.to.have.status(204);",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "DELETE",
												"header": [],
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"apis",
														":apiId"
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "403",
					"item": [
						{
							"name": "-- Prepare --",
							"item": [
								{
									"name": "Create API for subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "8f92b3fa-f8d3-42dd-a895-dd4e31d41e2a",
												"exec": [
													"pm.test(\"Status code is 201\", function () {",
													"    pm.response.to.have.status(201);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"pm.collectionVariables.set(\"created_api_for_sub\", JSON.stringify(jsonData));",
													"pm.collectionVariables.set(\"created_api_for_sub_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"403API_SUB\",\n\t\"version\":\"1.0\",\n\t\"description\":\"API for Forbidden access to 'Subscription'\",\n\t\"contextPath\":\"/403apisub\",\n\t\"endpoint\":\"http://localhost\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/apis",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"apis"
											]
										}
									},
									"response": []
								},
								{
									"name": "Publish created API",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "4bda0f2f-38be-4074-af21-348eee3f43da",
												"exec": [
													"var createdApi_for_sub_toPublish = JSON.parse(pm.collectionVariables.get(\"created_api_for_sub\"));",
													"createdApi_for_sub_toPublish.lifecycle_state='published';",
													"delete createdApi_for_sub_toPublish.id;",
													"delete createdApi_for_sub_toPublish.state;",
													"delete createdApi_for_sub_toPublish.created_at;",
													"delete createdApi_for_sub_toPublish.updated_at;",
													"delete createdApi_for_sub_toPublish.owner;",
													"delete createdApi_for_sub_toPublish.context_path;",
													"pm.collectionVariables.set(\"createdApi_for_sub_toPublish\", JSON.stringify(createdApi_for_sub_toPublish));",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "4d58cd2b-c059-4646-bc3b-83fa0dff196f",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{createdApi_for_sub_toPublish}}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"apis",
												":apiId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Create Plan for subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "60fd12e6-2b91-4fd5-82d2-b32b5754ceda",
												"exec": [
													"pm.test(\"Status code is 201\", function () {",
													"    pm.response.to.have.status(201);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"pm.collectionVariables.set(\"created_plan_for_sub_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"Plan_for_sub\",\n\t\"description\": \"a plan for Forbidden access to Subscription\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/plans",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"apis",
												":apiId",
												"plans"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Publish created Plan",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "1cd3e0ea-e814-437c-87b9-1011ffdd4b01",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"Plan_for_sub\",\n\t\"description\": \"a plan for Forbidden access to Subscription not found\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/plans/:planId/_publish",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"apis",
												":apiId",
												"plans",
												":planId",
												"_publish"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												},
												{
													"key": "planId",
													"value": "{{created_plan_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Create Application for subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "e14f9c07-5260-4901-9f80-812a9a0d87b6",
												"exec": [
													"pm.test(\"Status code is 201\", function () {",
													"    pm.response.to.have.status(201);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"pm.collectionVariables.set(\"created_application_for_sub_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"403ApplicationSub\",\n\t\"description\":\"Application for 'Forbidden access to Subscription'\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/applications",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"applications"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create Subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "dc221ded-b29b-40d5-be4d-b9e7fdce5c1f",
												"exec": [
													"pm.test(\"Status code is 201\", function () {",
													"    pm.response.to.have.status(201);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"pm.collectionVariables.set(\"created_sub_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/subscriptions?application={{created_application_for_sub_id}}&plan={{created_plan_for_sub_id}}",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"apis",
												":apiId",
												"subscriptions"
											],
											"query": [
												{
													"key": "application",
													"value": "{{created_application_for_sub_id}}"
												},
												{
													"key": "plan",
													"value": "{{created_plan_for_sub_id}}"
												}
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get subscription key",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "66eb6f3a-8668-43d0-8267-826819ff806f",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"pm.collectionVariables.set(\"first_sub_api_key\", jsonData[0].key);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/subscriptions/:subscriptionId/apikeys",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"apis",
												":apiId",
												"subscriptions",
												":subscriptionId",
												"apikeys"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												},
												{
													"key": "subscriptionId",
													"value": "{{created_sub_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "You do not have sufficient rights to access this resource",
							"item": [
								{
									"name": "GET /subscriptions - 2",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "782b052d-70f0-43bc-981d-c4c8160da74b",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/subscriptions?applicationId={{created_application_for_sub_id}}",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"subscriptions"
											],
											"query": [
												{
													"key": "applicationId",
													"value": "{{created_application_for_sub_id}}"
												}
											]
										},
										"description": "With an Application Id but without APPLICATION_SUBSCRIPTION[READ]"
									},
									"response": []
								},
								{
									"name": "GET /subscriptions - 3",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "57bb3d77-39c8-4cb7-b4b7-dfa0ff3595aa",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/subscriptions?applicationId={{created_application_for_sub_id}}&apiId={{created_api_for_sub_id}}",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"subscriptions"
											],
											"query": [
												{
													"key": "applicationId",
													"value": "{{created_application_for_sub_id}}"
												},
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												}
											]
										},
										"description": "With an API Id and an Application Id but without API_SUBSCRIPTION[READ] and APPLICATION_SUBSCRIPTION[READ]"
									},
									"response": []
								},
								{
									"name": "POST /subscriptions",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "6b7ae58e-7a0d-4719-bc8a-f5eda20958c5",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"application\":\"{{created_application_for_sub_id}}\",\n\t\"plan\":\"{{created_plan_for_sub_id}}\",\n\t\"request\":\"for Subscription scenario\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/subscriptions",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"subscriptions"
											]
										},
										"description": "APPLICATION_SUBSCRIPTION[CREATE]"
									},
									"response": []
								},
								{
									"name": "GET /subsciptions/:subscriptionId",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "7c502087-54f9-4556-bd45-5ccdbf9c800f",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/subscriptions/:subscriptionId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"subscriptions",
												":subscriptionId"
											],
											"variable": [
												{
													"key": "subscriptionId",
													"value": "{{created_sub_id}}"
												}
											]
										},
										"description": "API_SUBSCRIPTION[READ] or APPLICATION_SUBSCRIPTION[READ]"
									},
									"response": []
								},
								{
									"name": "POST /subscriptions/:subscriptionId/_close",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "da4e0b21-6993-4550-b4bd-d4078f083bf2",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/subscriptions/:subscriptionId/_close",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"subscriptions",
												":subscriptionId",
												"_close"
											],
											"variable": [
												{
													"key": "subscriptionId",
													"value": "{{created_sub_id}}"
												}
											]
										},
										"description": "APPLICATION_SUBSCRIPTION[DELETE]"
									},
									"response": []
								},
								{
									"name": "POST /subscriptions/:subscriptionId/keys/_renew",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "b42efb4c-a810-48d0-ae29-4e83dc496dcf",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/subscriptions/:subscriptionId/keys/_renew",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"subscriptions",
												":subscriptionId",
												"keys",
												"_renew"
											],
											"variable": [
												{
													"key": "subscriptionId",
													"value": "{{created_sub_id}}"
												}
											]
										},
										"description": "API_SUBSCRIPTION[UPDATE] or APPLICATION_SUBSCRIPTION[UPDATE]"
									},
									"response": []
								},
								{
									"name": "POST /subscriptions/:subscriptionId/keys/:keyId/_revoke",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "3487975d-ae7c-49fe-8ab5-4189c0e7b158",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/subscriptions/:subscriptionId/keys/:keyId/_revoke",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"subscriptions",
												":subscriptionId",
												"keys",
												":keyId",
												"_revoke"
											],
											"variable": [
												{
													"key": "subscriptionId",
													"value": "{{created_sub_id}}"
												},
												{
													"key": "keyId",
													"value": "{{first_sub_api_key}}"
												}
											]
										},
										"description": "API_SUBSCRIPTION[UPDATE] or APPLICATION_SUBSCRIPTION[UPDATE]"
									},
									"response": []
								}
							],
							"auth": {
								"type": "basic",
								"basic": [
									{
										"key": "password",
										"value": "password",
										"type": "string"
									},
									{
										"key": "username",
										"value": "user",
										"type": "string"
									}
								]
							},
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "6634a7b4-56f2-49d3-b4e2-37cb43dfed1a",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "12b3e037-89a3-4b64-8ab7-172d17a0f8c6",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 403\", function () {",
											"    pm.response.to.have.status(403);",
											"});",
											"",
											"pm.test(\"You do not have sufficient rights to access this resource\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"You do not have sufficient rights to access this resource\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Clean up --",
							"item": [
								{
									"name": "Close subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "7f560503-5c7e-4842-9c0c-3e2abde84695",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/subscriptions/:subscriptionId/status?status=CLOSED",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"apis",
												":apiId",
												"subscriptions",
												":subscriptionId",
												"status"
											],
											"query": [
												{
													"key": "status",
													"value": "CLOSED"
												}
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												},
												{
													"key": "subscriptionId",
													"value": "{{created_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete created application",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "cf887f7b-a6d0-4c00-af81-954795ded05d",
												"exec": [
													"pm.test(\"Status code is 204\", function () {",
													"    pm.response.to.have.status(204);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Close created Plan",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "49090339-ad4c-4d01-8208-231a629259b3",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/plans/:planId/_close",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"apis",
												":apiId",
												"plans",
												":planId",
												"_close"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												},
												{
													"key": "planId",
													"value": "{{created_plan_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete created API",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "80d12f83-555f-4eb7-a364-6885d1d427a4",
												"exec": [
													"pm.test(\"Status code is 204\", function () {",
													"    pm.response.to.have.status(204);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"apis",
												":apiId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "404",
					"item": [
						{
							"name": "-- Prepare --",
							"item": [
								{
									"name": "Create API for subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "ee584555-0338-43b3-a7ea-9fd49ce8aed3",
												"exec": [
													"pm.test(\"Status code is 201\", function () {",
													"    pm.response.to.have.status(201);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"pm.collectionVariables.set(\"created_api_for_sub\", JSON.stringify(jsonData));",
													"pm.collectionVariables.set(\"created_api_for_sub_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"404API_SUB\",\n\t\"version\":\"1.0\",\n\t\"description\":\"API for 'Subscription not found'\",\n\t\"contextPath\":\"/404apisub\",\n\t\"endpoint\":\"http://localhost\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/apis",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"apis"
											]
										}
									},
									"response": []
								},
								{
									"name": "Publish created API",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "9285d4e7-53ae-40b7-b7a2-66a5a4de0343",
												"exec": [
													"var createdApi_for_sub_toPublish = JSON.parse(pm.collectionVariables.get(\"created_api_for_sub\"));",
													"createdApi_for_sub_toPublish.lifecycle_state='published';",
													"delete createdApi_for_sub_toPublish.id;",
													"delete createdApi_for_sub_toPublish.state;",
													"delete createdApi_for_sub_toPublish.created_at;",
													"delete createdApi_for_sub_toPublish.updated_at;",
													"delete createdApi_for_sub_toPublish.owner;",
													"delete createdApi_for_sub_toPublish.context_path;",
													"pm.collectionVariables.set(\"createdApi_for_sub_toPublish\", JSON.stringify(createdApi_for_sub_toPublish));",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "0c59f086-f48a-4c73-b234-2ba104356842",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{createdApi_for_sub_toPublish}}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"apis",
												":apiId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Create Plan for subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "613451cd-7056-4d4f-9ba6-722086674c6a",
												"exec": [
													"pm.test(\"Status code is 201\", function () {",
													"    pm.response.to.have.status(201);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"pm.collectionVariables.set(\"created_plan_for_sub_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"Plan_for_sub\",\n\t\"description\": \"a plan for Subscription not found\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/plans",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"apis",
												":apiId",
												"plans"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Publish created Plan",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "4f3a00fe-488e-4bc2-9c7a-bf2e56f6a0d3",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"Plan_for_sub\",\n\t\"description\": \"a plan for Subscription not found\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/plans/:planId/_publish",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"apis",
												":apiId",
												"plans",
												":planId",
												"_publish"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												},
												{
													"key": "planId",
													"value": "{{created_plan_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Create Application for subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "839123b1-30a1-4e1d-8b73-7c4d506f7993",
												"exec": [
													"pm.test(\"Status code is 201\", function () {",
													"    pm.response.to.have.status(201);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"pm.collectionVariables.set(\"created_application_for_sub_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"404ApplicationSub\",\n\t\"description\":\"Application for 'Subscription not found'\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/applications",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"applications"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create Subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "52191874-9fa6-4a13-aa2a-78645de4be27",
												"exec": [
													"pm.test(\"Status code is 201\", function () {",
													"    pm.response.to.have.status(201);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"pm.collectionVariables.set(\"created_sub_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/subscriptions?application={{created_application_for_sub_id}}&plan={{created_plan_for_sub_id}}",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"apis",
												":apiId",
												"subscriptions"
											],
											"query": [
												{
													"key": "application",
													"value": "{{created_application_for_sub_id}}"
												},
												{
													"key": "plan",
													"value": "{{created_plan_for_sub_id}}"
												}
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Subscription not found",
							"item": [
								{
									"name": "GET /subscriptions/:subscriptionId - Subscription not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "3c17b5c5-5a62-425c-b668-8e2dc99789da",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/subscriptions/:subscriptionId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"subscriptions",
												":subscriptionId"
											],
											"variable": [
												{
													"key": "subscriptionId",
													"value": "SUBSCRIPTION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /subscriptions/:subscriptionId/_close - Subscription not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "3dbf80c8-20dc-4a7e-81d2-0f6d694a3213",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/subscriptions/:subscriptionId/_close",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"subscriptions",
												":subscriptionId",
												"_close"
											],
											"variable": [
												{
													"key": "subscriptionId",
													"value": "SUBSCRIPTION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /subscriptions/:subscriptionId/keys/_renew - Subscription not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "74918ece-1303-46c2-b9b0-4baae9c5320b",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/subscriptions/:subscriptionId/keys/_renew",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"subscriptions",
												":subscriptionId",
												"keys",
												"_renew"
											],
											"variable": [
												{
													"key": "subscriptionId",
													"value": "SUBSCRIPTION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /subscriptions/:subscriptionId/keys/:keyId/_revoke - Subscription not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "7f634321-672a-4219-86c1-6aadc3f90bfd",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/subscriptions/:subscriptionId/keys/:keyId/_revoke",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"subscriptions",
												":subscriptionId",
												"keys",
												":keyId",
												"_revoke"
											],
											"variable": [
												{
													"key": "subscriptionId",
													"value": "SUBSCRIPTION"
												},
												{
													"key": "keyId",
													"value": "KEY"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "ea2c8e3f-e6f6-4cdf-b1a3-5c84d66a5cfb",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "03ced3b5-7e32-40ce-893c-5a925dd24134",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"pm.test(\"Subscription not found\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"Subscription [SUBSCRIPTION] can not be found.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Key not found",
							"item": [
								{
									"name": "POST /subscriptions/:subscriptionId/keys/:keyId/_revoke - Subscription not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "fce073a3-7946-4e65-bc2c-1a97151b1cf7",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/subscriptions/:subscriptionId/keys/:keyId/_revoke",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"subscriptions",
												":subscriptionId",
												"keys",
												":keyId",
												"_revoke"
											],
											"variable": [
												{
													"key": "subscriptionId",
													"value": "{{created_sub_id}}"
												},
												{
													"key": "keyId",
													"value": "KEY"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "76c7a9a8-a85a-4dea-9bda-5b9cc1e89eb4",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "cef1168a-3039-4d89-a20c-c8b4d5893104",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"pm.test(\"Subscription not found\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"No API Key can be found.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Clean up --",
							"item": [
								{
									"name": "Close subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "e955a29e-0fb8-4424-9523-6293c7393084",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/subscriptions/:subscriptionId/status?status=CLOSED",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"apis",
												":apiId",
												"subscriptions",
												":subscriptionId",
												"status"
											],
											"query": [
												{
													"key": "status",
													"value": "CLOSED"
												}
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												},
												{
													"key": "subscriptionId",
													"value": "{{created_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete created application",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "b779c39c-7747-48f7-9212-273395626963",
												"exec": [
													"pm.test(\"Status code is 204\", function () {",
													"    pm.response.to.have.status(204);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Close created Plan",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "d12d7193-701e-43d0-9c95-51965042627d",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId/plans/:planId/_close",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"apis",
												":apiId",
												"plans",
												":planId",
												"_close"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												},
												{
													"key": "planId",
													"value": "{{created_plan_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete created API",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "066197ec-79f4-4e85-b6b7-363ac012ff68",
												"exec": [
													"pm.test(\"Status code is 204\", function () {",
													"    pm.response.to.have.status(204);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/apis/:apiId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"apis",
												":apiId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "b116f804-df76-49bd-bfc6-bfb9b86d1452",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "61c257dd-fd2b-4c84-9c5a-37721ec1b9d0",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"auth": {
		"type": "basic",
		"basic": [
			{
				"key": "password",
				"value": "admin",
				"type": "string"
			},
			{
				"key": "username",
				"value": "admin",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "5b28e8fc-b0b5-45aa-895b-3c8eec95bc2c",
				"type": "text/javascript",
				"exec": [
					"if(!pm.collectionVariables.get('X-Xsrf-Token')) {",
					"    pm.sendRequest({",
					"        url: pm.environment.get('GRAVITEEIO_PORTAL_URL') + '/configuration',",
					"        method: 'GET',",
					"    ",
					"    }, function (err, res) {",
					"        pm.collectionVariables.set('X-Xsrf-Token', res.headers.get('X-Xsrf-Token'));",
					"    });",
					"}",
					"",
					"pm.request.headers.add({key: 'X-Xsrf-Token', value: pm.collectionVariables.get('X-Xsrf-Token') });"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "74f2c76b-100f-4b39-aa7f-d2ffd7b8b90a",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "37a62926-e44d-4273-b561-efe020f4aa49",
			"key": "X-Xsrf-Token",
			"value": ""
		},
		{
			"id": "62e702d6-e508-4e92-b53e-d5c77d8a062d",
			"key": "created_api",
			"value": ""
		},
		{
			"id": "bab6aa7e-5293-424c-978d-f3a70ffe8b1e",
			"key": "created_api_id",
			"value": ""
		},
		{
			"id": "c18e3e22-4cc2-4c2f-a37a-fffea88aee8b",
			"key": "created_api_owner_id",
			"value": ""
		},
		{
			"id": "0766e577-b4bb-4014-8d57-7e600c3e6c83",
			"key": "createdApi_toPublish",
			"value": ""
		},
		{
			"id": "3829b7e1-91ba-4374-813d-7371df810dba",
			"key": "created_rating_id",
			"value": ""
		},
		{
			"id": "089d93d2-e7dd-4934-a406-a83c10d4e239",
			"key": "created_application_id",
			"value": ""
		},
		{
			"id": "cf7dd4b9-8537-4e16-a2a5-db9772f5b16f",
			"key": "created_generic_config",
			"value": ""
		},
		{
			"id": "a82adff6-6139-4bc3-962d-a921590362c9",
			"key": "USER_ENV_ROLE",
			"value": ""
		},
		{
			"id": "3d1d4e22-e909-424c-8159-c2b2202ed636",
			"key": "UPDATED_USER_ENV_ROLE",
			"value": ""
		},
		{
			"id": "b45a9353-780c-4820-8e71-a0c6f3756382",
			"key": "created_application",
			"value": ""
		},
		{
			"id": "396ebcd5-d895-4707-adbf-6a24a9a0619a",
			"key": "created_page_id",
			"value": ""
		},
		{
			"id": "fbf31eae-b154-42e5-8915-477760dd53cb",
			"key": "created_page_order",
			"value": ""
		},
		{
			"id": "0272a80a-b480-4238-b7b2-94515a9b3334",
			"key": "created_exclusion_group_id",
			"value": ""
		},
		{
			"id": "b2742be2-8935-4fa8-9bf2-0904ef598576",
			"key": "user_reference",
			"value": ""
		},
		{
			"id": "13708e5f-afad-4fe0-8a3f-c9e3c897b9a8",
			"key": "created_api_for_sub",
			"value": ""
		},
		{
			"id": "a1c885e9-8c0f-4b5d-9094-637d77ec1400",
			"key": "created_api_for_sub_id",
			"value": ""
		},
		{
			"id": "93f8d8fd-481b-4fdb-8720-1069f6d8b8f4",
			"key": "createdApi_for_sub_toPublish",
			"value": ""
		},
		{
			"id": "3adfa1df-2b89-471e-92b7-21bb455e6124",
			"key": "created_plan_for_sub_id",
			"value": ""
		},
		{
			"id": "9a19a5cf-7b49-4760-b543-e0299eb2974a",
			"key": "created_application_for_sub_id",
			"value": ""
		},
		{
			"id": "7ecad570-5429-4909-bb43-f405fd5bfc8c",
			"key": "created_sub_id",
			"value": ""
		},
		{
			"id": "b8575c44-ca18-4016-a00c-cf96012c2f39",
			"key": "first_sub_api_key",
			"value": ""
		},
		{
			"id": "9275e635-6ba6-4067-8325-891a0567137c",
			"key": "created_sec_plan_for_sub_id",
			"value": ""
		},
		{
			"id": "07700893-a43e-40f3-b190-6d8ca62da05d",
			"key": "created_sec_sub_id",
			"value": ""
		},
		{
			"id": "b593d356-5ba8-486f-adc4-e8f7d9eb22af",
			"key": "created_user_id",
			"value": ""
		}
	],
	"protocolProfileBehavior": {}
}
