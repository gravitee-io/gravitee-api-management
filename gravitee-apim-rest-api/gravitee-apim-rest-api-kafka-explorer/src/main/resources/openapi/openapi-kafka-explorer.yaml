openapi: 3.0.3
info:
    title: Gravitee.io APIM - Kafka Explorer
    description: |-
        Kafka cluster exploration and management API for Gravitee APIM.
    contact:
        email: team-apim@graviteesource.com
    license:
        name: Apache 2.0
        url: http://www.apache.org/licenses/LICENSE-2.0.html
    version: 1.0.0

tags:
    - name: Kafka Explorer
      description: Kafka Explorer module information

paths:
    /kafka-explorer/describe-cluster:
        post:
            tags:
                - Kafka Explorer
            summary: Describe a Kafka cluster
            description: |
                Connects to a Kafka cluster and returns its metadata including cluster ID, controller, and nodes.
            operationId: describeCluster
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/DescribeClusterRequest"
            responses:
                "200":
                    description: Cluster metadata
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/DescribeClusterResponse"
                "400":
                    description: Invalid parameters
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/KafkaExplorerError"
                "502":
                    description: Connection failure
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/KafkaExplorerError"

components:
    schemas:
        DescribeClusterRequest:
            type: object
            required:
                - clusterId
            properties:
                clusterId:
                    type: string
                    description: ID of the Cluster to connect to

        DescribeClusterResponse:
            type: object
            properties:
                clusterId:
                    type: string
                controller:
                    $ref: "#/components/schemas/KafkaNode"
                nodes:
                    type: array
                    items:
                        $ref: "#/components/schemas/KafkaNode"

        KafkaNode:
            type: object
            properties:
                id:
                    type: integer
                    format: int32
                host:
                    type: string
                port:
                    type: integer
                    format: int32

        KafkaExplorerError:
            type: object
            properties:
                message:
                    type: string
                technicalCode:
                    type: string
                    description: Technical code to identify error type (CONNECTION_FAILED, AUTHENTICATION_FAILED, TIMEOUT, etc.)
